<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
    
            
            <meta name="twitter:card" content="summary_large_image"/>
            <meta name="twitter:image" content="/images/visa_network_map.png"/>
    



<meta name="twitter:title" content="Visa Costs meet Data Viz"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@corrieaar"/>



  	<meta property="og:title" content="Visa Costs meet Data Viz &middot; Samples of Thoughts" />
  	<meta property="og:site_name" content="Samples of Thoughts" />
  	<meta property="og:url" content="/2020/visa-costs-data-viz/" />

    
       <meta property="og:image" content="/images/visa_network_map.png"/>
    
    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2020-04-28T00:00:00Z" />

    
    <meta property="article:tag" content="R" />
    
    <meta property="article:tag" content="Data Viz" />
    
    <meta property="article:tag" content="ggraph" />
    
    <meta property="article:tag" content="networks" />
    
    <meta property="article:tag" content="tidygraph" />
    
    

    <title>Visa Costs meet Data Viz &middot; Samples of Thoughts</title>

    
    <meta name="description" content="I recently stumbled across this data set about visa costs. It is a collection of visa costs for all countries for different kind of visas (tourist, business, wo" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/images/favicon.ico">
	  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/css/nav.css" />

    
    
    


<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/googlecode.min.css' rel='stylesheet' type='text/css' />



  
     
      
          <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Samples of Thoughts" />
      
      
    
    <meta name="generator" content="Hugo 0.55.5" />

    <link rel="canonical" href="/2020/visa-costs-data-viz/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name":  null 
    },
    "author": {
        "@type": "Person",
        "name":  null ,
        
        "url":  null ,
        "sameAs": [
            
            
             
             
             
             
             
            
        ]
    },
    "headline": "Visa Costs meet Data Viz",
    "name": "Visa Costs meet Data Viz",
    "wordCount":  1447 ,
    "timeRequired": "PT7M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": "en"
    },
    "url": "/2020/visa-costs-data-viz/",
    "datePublished": "2020-04-28T00:00Z",
    "dateModified": "2020-04-28T00:00Z",
    
    "image": {
        "@type": "ImageObject",
        "url": "/images/tea_with_books.jpg",
        "width": 3000,
        "height": 1445
    },
    
    "keywords": "R, Data Viz, ggraph, networks, tidygraph",
    "description": "",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/2020/visa-costs-data-viz/"
    }
}
    </script>
    


    

    
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-140745376-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>


    
    
    




<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#40485A",
          "text": "#ffffff"
        },
        "button": {
          "background": "#5B5A68",
          "text": "#ffffff"
        }
      },
      "content": {
        "message": "This website uses cookies to ensure you get the best experience on my website.",
        "dismiss": "Got it!",
        "link": "Learn more",
        "href": "https://cookies.insites.com"
      }
    })});
</script>


</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/projects">Projects</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/talks">Talks</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/about">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/">Home</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



  
 <header class="main-header post-head" style="background-image: url(/images/tea_with_books.jpg)"> 
  
  <nav class="main-nav overlay clearfix">



      <ul>
        
			<li> <a class="blog-logo" href="/">Home</a> </li>
			  
			<li> <a class="blog-logo" href="/about">About</a> </li>
			  
			<li> <a class="blog-logo" href="/talks">Talks</a> </li>
			  
			<li> <a class="blog-logo" href="/projects">Projects</a> </li>
			  

            
              <a class="menu-button icon-feed" href="">&nbsp;&nbsp;Subscribe</a>
            
            
      
       </ul>
    </nav>
    
     <div class="vertical">
        <div class="main-header-content inner">
            


    <a class="bloglogo" href="https://github.com/corriebar" target="_blank">
    <span class="icon-github" style="color:white;font-size:2em"></span>
    </a>
&nbsp;









    <a class="bloglogo" href="https://twitter.com/corrieaar" target="_blank">
        <span class="icon-twitter" style="color:white;font-size:2em"></span>
    </a>
&nbsp;














            <h1 class="page-title">Samples of Thoughts</h1>
            <h2 class="page-description">about data, statistics  and everything in between</h2>
        </div>
    </div>  
    


</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Visa Costs meet Data Viz</h1>
        <small></small>

        <section class="post-meta">
        
            <p class="post-reading post-line">
            <span>Estimated reading time: 7 min</span>
            </p>
        
        
          <time class="post-date" datetime="2020-04-28T00:00:00Z">
            Apr 28, 2020
          </time>
        
        
         
          <span class="post-tag small"><a href="/tags/r/">#R</a></span>
         
          <span class="post-tag small"><a href="/tags/data-viz/">#Data Viz</a></span>
         
          <span class="post-tag small"><a href="/tags/ggraph/">#ggraph</a></span>
         
          <span class="post-tag small"><a href="/tags/networks/">#networks</a></span>
         
          <span class="post-tag small"><a href="/tags/tidygraph/">#tidygraph</a></span>
         
        </section>
    </header>

    <section class="post-content">
      


<p>I recently stumbled across this <a href="http://www.migrationpolicycentre.eu/globalmobilities/dataset/">data set</a> about visa costs. It is a collection of visa costs for all countries for different kind of visas (tourist, business, work, transit, and some other visas). Each row corresponds to visa relations between a source country (the country applying for the visa) and a target country (the country issuing the visa) together with the cost for the different visa types.</p>
<p>Since I had a bit of free time on my hand, I decided to do some “plotcrastinating”, play around with the data and try out some new visualizations.</p>
<div id="travelling-the-world" class="section level2">
<h2>Travelling the world</h2>
<p>As a German myself, I enjoy the privilege of a great number of visas, many of them free. But how do other countries fare in terms of the number of countries they can travel? And how many of these can they visit without visa cost?</p>
<p>Let’s start with looking at the distribution of tourist visas.</p>
<p><img src="/post/2020/2020-04-28-visa-costs-data-viz_files/figure-html/unnamed-chunk-1-1.svg" width="120%" height="95%" /></p>
<p>Each point represents one or multiple countries that get the same number of tourist visas. E.g. to the right, the field is led by the USA with 162 visas, closely followed by the grey dot representing Belgium, Finland, and France.</p>
<p>Both Africa and Asia have distinctly bimodal distributions: Mauritius and Seychelles, both popular tourist destinations, score much higher than all other African countries. In Asia, countries like Singapore, South Korea and Japan get more than 150 tourist visas while most other countries in Asia score only around or below 100.</p>
<p>These numbers are, however, only lower bounds. The data collection process is described in this <a href="https://cadmus.eui.eu/bitstream/handle/1814/66583/RSCAS%202020_18.pdf">working paper</a> and for some countries no visa information could be found online. A visa relation might still exist but it is fair to say that if it can’t be found online, it is probably more effort to obtain it.</p>
<div id="a-technical-note" class="section level4">
<h4>A technical note</h4>
<p>This kind of plot is one of my favorite plots and I use it (or a variant of it) pretty much all the time. At its core, it’s just <code>geom_point()</code>:</p>
<pre class="r"><code>p &lt;- d %&gt;% 
  count(source, source_continent) %&gt;%
  ggplot(aes(x = source_continent, y = n, col=source_continent )) +
  geom_point() +
  coord_flip()</code></pre>
<p>There’s a great <a href="https://cedricscherer.netlify.app/2019/05/17/the-evolution-of-a-ggplot-ep.-1/">blog post</a> by Cedric Scherer that walks through all the steps on how to prettify this plot, in particular, how to include the arrows and annotations. There are a few adaptions I made: Instead of <code>geom_point()</code>, I use <code>geom_quasirandom()</code> from <code>{ggbeeswarm}</code>. It packs points close together while trying to avoid overplotting. It doesn’t solve the overplotting problem completely though. I therefore like to add a small border line to the points so they don’t look like a big, weirdly shaped blob. The trick to getting these is to use a shape that has <code>fill</code> and <code>color</code> parameters. The only point shapes that have these are the shapes 21 to 25:</p>
<pre class="r"><code>p &lt;- d %&gt;% 
  count(source, source_continent) %&gt;%
  ggplot(aes(x = source_continent, y = n )) +
  geom_point(aes(fill=source_continent), 
             color = &quot;white&quot;, shape = 21 ) +
  coord_flip()</code></pre>
</div>
</div>
<div id="free-travel-visas-for-everyone" class="section level2">
<h2>Free travel (visas) for everyone!</h2>
<p>The existence of a visa relation doesn’t tell us how much effort it will be to apply for it nor how difficult it is to have it granted. For an estimate of how many countries one can visit without much hassle, we can restrict the data to free tourist visas.
I first wondered if there might be some countries that don’t get any free tourist visas but this does not seem to be the case. At least in this data set, every country gets at least 11 free visas. (Remember, this is a lower bound)</p>
<p>I am going to use the same plot style as above but make a small modification. One problem with the previous plot is that the countries Luxembourg and China are both represented by the same amount of ink. To better represent the actual number of people affected by a visa policy, it is better to use the population for the bubble sizes:
<img src="/post/2020/2020-04-28-visa-costs-data-viz_files/figure-html/unnamed-chunk-4-1.svg" width="120%" height="95%" /></p>
<p>The general distribution mostly stays the same, just shifted to the left. On the lower hand is Iraq (again) with only 11 free visas. The US has been overtaken by a whole group of European countries, led by Finland, Germany, and Sweden which all three get 119 free visas each. The US is now behind Canada and Singapore, Japan, and Korea, being on the same level as Brazil with 106 free visas.</p>
<p>The bubble sizes make it much clearer that the lower field has some of the most populous countries. We can see from the grey line (median weighted by population) that one half of the world population gets less than 30 visas for free while a good chunk of the other half gets around 100 free visas.</p>
</div>
<div id="exchange-of-ideas" class="section level2">
<h2>Exchange of Ideas</h2>
<p>While free travel visas are nice to visit new cities and beaches, it is easier to form deeper connections with land and people through a longer stay, such as by studying in the country.</p>
<p>Obviously, some countries are such popular destinations for studying that higher visa cost wouldn’t deter international students, think e.g. US or Australia.
However, I was interested to see how visa policies regarding student visas are in the rest of the world. As the data set forms a directed network, I’m going to plot the student visa data as a network. And since the nodes are countries, I’ll plot the network on top of a world map.</p>
<div id="another-technical-note" class="section level4">
<h4>Another technical note</h4>
<p>As this seems a rather complex plot, I was pleasantly surprised that <code>{ggraph}</code> makes this surprisingly simple.</p>
<p>First, we built the graph using <code>{tidygraph}</code> by extracting the countries as nodes from our data set. The data set itself provides the edges.</p>
<pre class="r"><code>nodes &lt;- d %&gt;%
  group_by(country=source) %&gt;%
  summarise(lat = unique(source_lat),
            long = unique(source_long))

graph &lt;- tbl_graph(edges = d %&gt;% select(source, target), 
                   nodes = nodes, 
                   directed = TRUE )</code></pre>
<p>To build the plot, we first specify our layout manually by providing the coordinates for each node.</p>
<pre class="r"><code>g &lt;- graph %&gt;%
  ggraph(layout = &quot;manual&quot;, x=nodes$long, y=nodes$lat) </code></pre>
<p>Next, we’ll need the map which is provided in the <code>{maps}</code> package via <code>map_data(&quot;world&quot;)</code></p>
<pre class="r"><code>country_shapes &lt;- geom_polygon(aes(x = long, y = lat, group = group),
                               data = map_data(&#39;world&#39;))</code></pre>
<p>To get the full plot, we then simply add up the different layers:</p>
<pre class="r"><code>g +
  country_shapes +
  geom_edge_arc() +
  geom_node_point()</code></pre>
<p>After adding aesthetics and some fine-tuning, the final plot looks like this:
<img src="/post/2020/2020-04-28-visa-costs-data-viz_files/figure-html/unnamed-chunk-10-1.svg" width="120%" height="120%" /></p>
<p>To make this visualization less crowded, I omitted countries with less than a million people. The edges are colored by the continent of the visiting country while the nodes are sized by the number of incoming edges, i.e. the number of free student visas it gives out.</p>
<p>Again, it’s important to keep in mind that this data is not complete and the student visa data has more missing values than tourist visa data. However, I think it is still reasonable to assume that if no visa information is easily available, it means more effort for the student and it is thus less likely to be a common student destination. Of course, some of the most popular destinations have fees in place and thus these relations don’t show up here: the US has no incoming edges and Australia has only one coming from New Zealand.</p>
<p>The densest part of the network is centered at Europe: the EU makes it very easy for its citizens to study anywhere within its member countries. But it looks like it’s also very generous in giving free student visas to countries outside of the EU: most edges of all other continents seem to be directed towards Europe. This could just be because there are more countries in Europe but the same observation holds if we merge all EU countries into a single node:</p>
<p><img src="/post/2020/2020-04-28-visa-costs-data-viz_files/figure-html/unnamed-chunk-11-1.svg" width="120%" height="120%" /></p>
<p>I found curious that both North and South America have almost no free visa relations inside their own continent. Especially for South America, I expected more free visa connections amongst the countries.</p>
<p>Having visa relations between two countries doesn’t necessarily mean that people use this visa though. For example, the country offering the most free student visas in Africa is Benin which, according to <a href="https://en.wikipedia.org/wiki/Benin#Education">Wikipedia</a>, has one of the lowest literacy rates in the world. Benin managed to more than double their university enrollment, so their visa policy might be part of their education strategy. Still, it’s unlikely that generous visa policies by themselves lead to more international students.</p>
</div>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<p>The more I learn about <code>{ggplot2}</code> the more impressed I am with what is possible. On the other hand, the more new tricks I learn, the more tempted I am to spend more time on it. Anyway, I think the results were still worth the time invest and hopefully, next time, it takes less time to tweak color and fonts.</p>
<p><small><a href="https://github.com/corriebar/blogdown_source/blob/master/content/post/2020/2020-04-28-visa-costs-data-viz.Rmd">Full code.</a><small></p>
</div>

    
    </section>


  <aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="/2020/ai-guild-podcast-data-science-interviews/">
          <section class="post">
              <h5>AI Guild Podcast: Data Science Interviews</h5>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="/2020/connecting-disinformation-with-tidygraph/">
          <section class="post">
              <h5>Connecting Disinformation with tidygraph</h5>
          </section>
      </a>
      

</aside>



  <footer class="post-footer">


    









<section class="author">
  <h4><a href="/">Corrie</a></h4>
  
  <p>Read <a href="/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    
    
  </div>
</section>




    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Visa%20Costs%20meet%20Data%20Viz&nbsp;-&nbsp;Samples%20of%20Thoughts&amp;url=%2f2020%2fvisa-costs-data-viz%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=421');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=%2f2020%2fvisa-costs-data-viz%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=551');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-linkedin" style="font-size: 1.4em" href="https://www.linkedin.com/shareArticle?mini=true&title=Visa%20Costs%20meet%20Data%20Viz&url=%2f2020%2fvisa-costs-data-viz%2f"
               onclick="window.open(this.href, 'linkedin-share', 'width=554,height=571');return false;">
    <span class="hidden">LinkedIn</span>
    </a>

</section>




    

<div id="disqus_thread"></div>
<script>




var disqus_config = function () {
this.page.url = "\/2020\/visa-costs-data-viz\/";  
this.page.identifier = "\/2020\/visa-costs-data-viz\/"; 
};

(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://corriebar-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>








  </footer>
</article>

</main>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Samples of Thoughts</a> 
        &copy; Corrie Bartelheimer 2020 &middot; </section>
        
    </footer>
    </div>
    <script type="text/javascript" src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
    
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>


    
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
    </script>
    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML">
</script>


    
    
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-140745376-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>


    
</body>
</html>

